# Исследование по выбору хранилища

## Анализ выбора хранилища

MongoDB — основная рекомендуемая СУБД для реализации нашего сервиса. Она идеально соответствует операционным задачам (OLTP): управление пользователями, фильмами, закладками, рецензиями, а также частые операции постановки и снятия лайков и оценок. Гибкая документная модель MongoDB позволяет легко хранить и модифицировать структуры данных, такие как рецензии с вложенными данными. Поддержка транзакций обеспечит целостность данных при сложных операциях.

## Результат тестирования скорости работы

Для тестирования скорости работы `MongoDB` были добавлены следующие данные в таком объеме:
 - 10K пользователей;
 - 20K фильмов;
 - 20 оценок на пользователя;
 - 5 рецензий на пользователя;
 - 10 лайков на пользователя;
 - 8 закладок на пользователя.

### Добавление данных

- Генерация тестовых пользователей: `2.9532 сек`
- Генерация тестовых фильмов: `9.2598 сек`
- Генерация оценок фильмов: `6.0289 сек`
- Генерация рецензий: `4.1538 сек`
- Генерация лайков рецензий: `615.2240 сек`
- Генерация закладок: `2.2584 сек`

### Чтение данных

- Получение среднего рейтинга фильма: `0.1120 секунд`
- Поиск рецензий с сортировкой по дате: `0.0177 секунд`
- Получение закладок пользователя: `0.0025 секунд`
- Получение популярных рецензий: `0.0237 секунд`
- Обновление рейтинга фильма: `0.0057 секунд`
- Поиск по тексту рецензий: `0.0035 секунд`

## Описание реализации сервиса

При реализации мы выберем подход с созданием отдельного микросервиса. Ниже приведен список причин, по которым было принято такое решение:
1. Разделение ответственности. Текущий сервис отвечает за быструю выдачу данных для пользователей. Важна также и поддержка транзакционных операций.
2. Возможность не привязываться к технологиям предыдущего проекта, а использовать новые инструменты, подходящие под специфику решаемой задачи. 
3. Более устойчивая работа всего сервиса онлайн-кинотеатра. Разделяя проект на микросервисы, мы можем диверсифицировать риски падения всей системы. При падении микросервиса мы потеряем лишь часть функциональности, которую можно будет быстро восстановить при откате изменений. 
