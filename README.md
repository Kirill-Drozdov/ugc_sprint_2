# UGC Сервис

## UGC API 2

Приложение представляет собой API для управления пользовательским контентом.

При разработке данного сервиса было проведено исследование по выбору хранилища. С его результатами можно ознакомиться [тут](db_research/research_result/result.md).

## Запуск

1. Создать и заполнить файлы .env в директориях `src/` и `deploy/sentry/`:
   ```
   echo .env.template > .env
   ```
2. Запустить проект через docker-compose:
   ```
   docker compose up -d
   ```
3. После запуска спецификация UGC API 2 будет доступна по адресу http://127.0.0.1/api/ugc/openapi

## Просмотр ошибок в Sentry

Для возможности работы с сервисом `Sentry` необходимо убедиться в правильности заполнения файла `deploy/sentry/.env`, а также выполнить применение миграций в контейнере `sentry-api`:
```
docker compose exec sentry-api sentry upgrade
```
Во время применения миграций вам будет предложено создать суперпользователя. 

Ошибки при работе приложения будут перехватываться сервисом `Sentry`, который доступен по адресу http://127.0.0.1:9000. Аутентифицироваться можно с данными, которые вы указали для суперпользователя во время применения миграций.

## Логирование с ELK

В текущем проекте настроена трансляция логов в стек ELK.

По умолчанию `Kibana` доступна по адресу http://127.0.0.1:5601.

После добавления в `Kibana` нового `Index Pattern` для сервиса `UGC API 2` и `nginx` вы сможете увидеть логи в веб-интерфейсе, выбрав нужный паттерн в списке на странице `Discover`.


## Проверка работы:
Ссылка на приватный репозиторий для проверки ревьюером [тут](https://github.com/Kirill-Drozdov/ugc_sprint_2).